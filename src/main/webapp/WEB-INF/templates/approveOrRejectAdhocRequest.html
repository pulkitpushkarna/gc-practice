<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/mainLayout}">
<head>
    <title>Sign In</title>
</head>
<body>
<div class="row" layout:fragment="content">
    <div th:text="${cabRequest.travelDate}"> </div>
    <div th:text="${cabRequest.requester.email}"> </div>
    <div th:text="${cabRequest.pickUpLocation}"> </div>
    <div th:text="${cabRequest.dropLocation}"> </div>
    <div th:text="${cabRequest.creationTime}"> </div>
    <div th:text="${cabRequest.cabRequestStatus}"> </div>
    <div th:text="${cabRequest.reason}"> </div>
    <div><input type="text" id="details"/></div>
    <button id="approve" value="Approve" th:attr="cab-request-id=${cabRequest.id}">Approve</button>
    <button id="reject" value="Reject" th:attr="cab-request-id=${cabRequest.id}">reject</button>
</div>

<th:block layout:fragment="post-common-scripts">
    <script>
            jQuery(document).ready(function(){
                jQuery("#approve").click(function(){
                    var details = jQuery("#details").val();
                    var cabRequestId = jQuery(this).attr("cab-request-id");
                    jQuery.ajax({
                            url: "/approveCabRequest",
                            data: {
                                    cabRequestId: cabRequestId,
                                    details: details
                                    },
                            success : function(){
                               window.location.href="/adhocCabRequestsForApproval";
                            }
                        });
                });

                jQuery("#reject").click(function(){
                    var cabRequestId = jQuery(this).attr("cab-request-id");
                    jQuery.ajax({
                            url: "/rejectCabRequest",
                            data: {cabRequestId: cabRequestId},
                            success : function(){
                               window.location.href="/adhocCabRequestsForApproval";
                            }
                        });
                });

            });
    </script>
</th:block>

</body>
</html>